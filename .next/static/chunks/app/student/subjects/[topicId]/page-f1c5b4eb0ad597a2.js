(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4496],{981:function(e,t,s){Promise.resolve().then(s.bind(s,4799))},4799:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return P},dynamic:function(){return k}});var a=s(7437),r=s(2265),l=s(9376),n=s(970),i=s(1817),o=s(6070),c=s(5974),d=s(2869),m=s(5186),u=s(1239),x=s(1637),h=s(875),p=s(9322),f=s(401),j=s(962);function v(e){let{...t}=e;return(0,a.jsx)(j.fC,{"data-slot":"collapsible",...t})}function g(e){let{...t}=e;return(0,a.jsx)(j.wy,{"data-slot":"collapsible-trigger",...t})}function b(e){let{...t}=e;return(0,a.jsx)(j.Fw,{"data-slot":"collapsible-content",...t})}var w=s(7992);function y(e){let{xp:t,show:s,duration:l=1500}=e,[n,i]=(0,r.useState)(s);return((0,r.useEffect)(()=>{if(s){i(!0);let e=setTimeout(()=>i(!1),l);return()=>clearTimeout(e)}},[s,l]),n)?(0,a.jsx)("div",{className:"fixed top-20 right-4 z-50 pointer-events-none",children:(0,a.jsx)("div",{className:"animate-bounce",children:(0,a.jsxs)("div",{className:"flex items-center gap-2 bg-gradient-to-r from-yellow-400 to-yellow-500 text-yellow-900 px-6 py-3 rounded-full font-bold shadow-lg border border-yellow-300",children:[(0,a.jsx)(u.Z,{className:"h-5 w-5 animate-pulse"}),(0,a.jsxs)("span",{children:["+",t," XP"]})]})})}):null}function N(e){let{trigger:t}=e,[s,l]=(0,r.useState)([]);return((0,r.useEffect)(()=>{if(t){l(Array.from({length:30},(e,t)=>({id:t,left:100*Math.random(),delay:.2*Math.random(),duration:2+1*Math.random()})));let e=setTimeout(()=>l([]),3500);return()=>clearTimeout(e)}},[t]),0===s.length)?null:(0,a.jsxs)("div",{className:"fixed inset-0 pointer-events-none overflow-hidden",children:[s.map(e=>(0,a.jsx)("div",{className:"absolute w-2 h-2 bg-yellow-400 rounded-full",style:{left:"".concat(e.left,"%"),top:"-10px",animation:"fall ".concat(e.duration,"s linear ").concat(e.delay,"s forwards")}},e.id)),(0,a.jsx)("style",{children:"\n        @keyframes fall {\n          to {\n            transform: translateY(100vh) rotate(360deg);\n            opacity: 0;\n          }\n        }\n      "})]})}let _={note_read:()=>10,note_revise:()=>5,video_watch:()=>15,video_rewatch:()=>5,test_score:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e>=16?50:e>=11?25:e>=7?10:0},revision_complete:()=>10},S=e=>Math.floor(e/1e3)+1,D=(e,t,s)=>{try{let a="cooldown_".concat(e,"_").concat(t,"_").concat(s),r=localStorage.getItem(a);if(!r)return!0;return Date.now()-parseInt(r)>18e4}catch(e){return!0}},E=(e,t,s)=>{try{let a="cooldown_".concat(e,"_").concat(t,"_").concat(s);localStorage.setItem(a,Date.now().toString())}catch(e){console.warn("Failed to save cooldown")}},T=async(e,t,s,a,r)=>{let l=(0,n.e)();try{if(!D(e,t,s))return{success:!1,newTotalXP:0,xpEarned:0,leveledUp:!1,oldLevel:1,newLevel:1,error:"XP cooldown active. Try again in a few minutes."};let n=_[e](r);if(0===n)return{success:!0,newTotalXP:0,xpEarned:0,leveledUp:!1,oldLevel:1,newLevel:1};let{data:i,error:o}=await l.from("level_system").select("total_xp, current_level").eq("student_id",s).single(),c=0,d=1;if(o&&"PGRST116"!==o.code)throw Error("Failed to fetch level system: ".concat(o.message));i&&(c=i.total_xp||0,d=i.current_level||1);let m=c+n,u=S(m),x=u>d,{error:h}=await l.from("level_system").upsert({student_id:s,total_xp:m,current_level:u},{onConflict:"student_id"});if(h)throw Error("Failed to update level system: ".concat(h.message));let{error:p}=await l.from("xp_events").insert({student_id:s,topic_id:a,material_id:t,event_type:e,xp:n,created_at:new Date().toISOString()});return p&&console.warn("Failed to insert XP event:",p),E(e,t,s),{success:!0,newTotalXP:m,xpEarned:n,leveledUp:x,oldLevel:d,newLevel:u}}catch(t){let e=t instanceof Error?t.message:"Failed to award XP";return console.error("Error awarding XP:",e),{success:!1,newTotalXP:0,xpEarned:0,leveledUp:!1,oldLevel:1,newLevel:1,error:e}}};var C=s(8577),O=s(5165),Z=s(4330);function I(e){let{materials:t,studentId:s,topicId:l,onXPAward:p,onOpenMaterial:f}=e,[j,y]=(0,r.useState)({}),[N,_]=(0,r.useState)({}),[S,D]=(0,r.useState)({}),[E,T]=(0,r.useState)({}),[O,Z]=(0,r.useState)(!0),[I,A]=(0,r.useState)({}),k=(0,n.e)(),{toast:P}=(0,w.pm)();(0,r.useEffect)(()=>{let e=async()=>{Z(!0);try{let e=t.filter(e=>"test"===e.content_type),a={};for(let t of e){let{data:e,error:r}=await k.from("tests").select("*").eq("student_id",s).eq("test_material_id",t.id).order("attempt_number",{ascending:!1});!r&&e?a[t.id]=e:a[t.id]=[]}y(a)}catch(e){console.error("Error fetching test attempts:",e)}finally{Z(!1)}};t.length>0&&e()},[t,s,l,k]);let F=async(e,a)=>{try{await (0,C.IS)(l,s,{video:"video",notes:"pdf",pdf:"pdf",slides:"pdf","test-solution":"pdf",reference:"pdf",extra:"pdf"}[a]||"pdf"),await p({video:"video_watch",notes:"note_read",pdf:"note_read",slides:"note_read","test-solution":"note_read",reference:"note_read",extra:"note_read"}[a]||"note_read",e),f(e,a);let r=t.find(t=>t.id===e);r&&window.open(r.resource_url,"_blank")}catch(e){console.error("Error opening material:",e)}},z=async function(e,t){let a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=a?"retest-".concat(e):e;D(e=>({...e,[r]:!0}));try{let a=j[e]||[],r=a.length>0?Math.max(...a.map(e=>e.attempt_number))+1:1,{data:n,error:i}=await k.from("tests").insert({student_id:s,topic_id:l,test_material_id:e,attempt_number:r,score:t,max_score:20}).select();if(i)throw Error("Failed to submit score: ".concat(i.message));await p("test_score",e,t),n&&n.length>0&&y(t=>({...t,[e]:[n[0],...a]})),_(t=>({...t,[e]:void 0})),T(t=>({...t,[e]:!1}))}catch(e){console.error("Error submitting test score:",e),P({title:"Error",description:"Failed to submit test score.",variant:"destructive"})}finally{D(e=>({...e,[r]:!1}))}},M=(e,t)=>{let s=""===t?void 0:Math.min(Math.max(parseInt(t)||0,0),20);_(t=>({...t,[e]:s}))},R=(e=>{let t={video:[],notes:[],pdf:[],slides:[],test:[],"test-solution":[],reference:[],extra:[]};return e.forEach(e=>{e.content_type in t&&t[e.content_type].push(e)}),t})(t);if(!Object.values(R).some(e=>e.length>0))return(0,a.jsx)(o.Zb,{children:(0,a.jsx)(o.aY,{className:"pt-6",children:(0,a.jsx)("p",{className:"text-center text-sm text-muted-foreground",children:"No study materials available for this topic yet."})})});let X=e=>e>=12?{label:"PASSED",color:"bg-green-100 text-green-800"}:{label:"FAILED",color:"bg-red-100 text-red-800"},L=function(e,t,s,r){let l=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return 0===s.length?null:(0,a.jsx)("div",{children:(0,a.jsxs)(o.Zb,{children:[(0,a.jsx)(o.Ol,{children:(0,a.jsxs)(o.ll,{className:"text-lg flex items-center gap-2",children:[t," ",e]})}),(0,a.jsx)(o.aY,{children:(0,a.jsx)("div",{className:"space-y-4",children:s.map(e=>{let t=j[e.id]||[],s=t.length>0?t[0]:null,n=E[e.id],o=N[e.id],p=S[n?"retest-".concat(e.id):e.id];return(0,a.jsxs)("div",{className:"rounded-lg border p-4 hover:bg-muted/50",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between gap-4 mb-4",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"font-medium text-sm",children:e.title}),(0,a.jsx)(c.C,{variant:"secondary",className:"mt-2",children:e.content_type})]}),(0,a.jsx)("div",{className:"flex gap-2",children:(0,a.jsxs)(d.z,{onClick:()=>F(e.id,e.content_type),size:"sm",variant:"outline",className:"gap-1",children:[(0,a.jsx)(u.Z,{className:"h-3 w-3"}),r]})})]}),l&&(0,a.jsxs)("div",{className:"space-y-4 border-t pt-4",children:[s&&!n&&(0,a.jsx)("div",{className:"rounded-lg bg-muted p-4",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-sm font-semibold",children:["Latest Score: ",s.score," / ",s.max_score]}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["Attempt #",s.attempt_number]}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Taken on: ",new Date(s.created_at).toLocaleDateString()]})]}),(0,a.jsx)(c.C,{className:X(s.score).color,children:X(s.score).label})]})}),!s||n?(0,a.jsxs)("div",{className:"flex items-end gap-2",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("label",{className:"block text-xs font-medium text-muted-foreground mb-1",children:"Score (out of 20)"}),(0,a.jsx)(m.I,{type:"number",min:"0",max:"20",placeholder:"Enter your score",value:null!=o?o:"",onChange:t=>M(e.id,t.target.value),disabled:p})]}),(0,a.jsx)(d.z,{onClick:()=>z(e.id,o||0,n),disabled:void 0===o||p,size:"sm",children:p?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.Z,{className:"h-3 w-3 mr-1 animate-spin"}),"Submitting"]}):n?"Resubmit":"Submit"}),n&&(0,a.jsx)(d.z,{onClick:()=>{T(t=>({...t,[e.id]:!1})),_(t=>({...t,[e.id]:void 0}))},variant:"outline",size:"sm",children:"Cancel"})]}):(0,a.jsxs)(d.z,{onClick:()=>T(t=>({...t,[e.id]:!0})),variant:"outline",size:"sm",className:"w-full",children:[(0,a.jsx)(x.Z,{className:"h-3 w-3 mr-2"}),"Retest"]}),t.length>1&&(0,a.jsxs)(v,{open:I[e.id]||!1,onOpenChange:t=>A(s=>({...s,[e.id]:t})),children:[(0,a.jsx)(g,{asChild:!0,children:(0,a.jsxs)(d.z,{variant:"ghost",size:"sm",className:"w-full h-8",children:[(0,a.jsx)(h.Z,{className:"h-4 w-4 mr-2"}),"Attempt History (",t.length,")"]})}),(0,a.jsx)(b,{className:"space-y-2 mt-2",children:t.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between rounded-lg bg-muted p-3 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"font-medium",children:["Attempt #",e.attempt_number]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:new Date(e.created_at).toLocaleDateString()})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("span",{className:"font-semibold",children:[e.score,"/",e.max_score]}),(0,a.jsx)(c.C,{className:X(e.score).color,children:X(e.score).label})]})]},e.id))})]})]})]},e.id)})})})]})},e)},{video:U,notes:q,pdf:Y,slides:G,test:V,"test-solution":B,reference:H,extra:K}=R;return(0,a.jsxs)("div",{className:"space-y-6",children:[L("\uD83C\uDFAC Videos",(0,a.jsx)(u.Z,{className:"h-4 w-4"}),U,"Watch"),L("\uD83D\uDCDD Notes",(0,a.jsx)(u.Z,{className:"h-4 w-4"}),q,"Read"),L("\uD83D\uDCC4 PDFs",(0,a.jsx)(u.Z,{className:"h-4 w-4"}),Y,"Read"),L("\uD83D\uDDBC️ Slides",(0,a.jsx)(u.Z,{className:"h-4 w-4"}),G,"Read"),L("✍️ Tests",(0,a.jsx)(u.Z,{className:"h-4 w-4"}),V,"Start",!0)]})}let A=e=>{let{topicId:t,studentId:s,showSidebar:l=!0}=e,c=(0,n.e)(),{toast:m}=(0,w.pm)(),[u,x]=(0,r.useState)(null),[h,j]=(0,r.useState)([]),[v,g]=(0,r.useState)(!0),[b,_]=(0,r.useState)(null),[S,D]=(0,r.useState)({show:!1,xp:0}),[E,C]=(0,r.useState)(!1),{tabs:A,refetchTabs:k,handleCompleteRevision:P}=(0,O.n)(s),F={overdue:A.overdue.filter(e=>e.topic_id===t),today:A.today.filter(e=>e.topic_id===t),upcoming:A.upcoming.filter(e=>e.topic_id===t)},z=(0,r.useCallback)(async()=>{g(!0),_(null);try{let{data:e,error:s}=await c.from("topics").select("*").eq("id",t).single();if(s||!e)throw Error((null==s?void 0:s.message)||"Topic not found");x(e);let{data:a,error:r}=await c.from("study_materials").select("*").eq("topic_id",t).order("created_at",{ascending:!0});if(r)throw Error(r.message);j(a||[])}catch(e){_(e.message),console.error("Error fetching topic data:",e)}finally{g(!1)}},[c,t]);(0,r.useEffect)(()=>{t&&s&&z()},[t,s,z]);let M=async(e,a,r)=>{try{let{xpEarned:l,leveledUp:n}=await T(e,a,s,t,r);l>0&&(D({show:!0,xp:l}),setTimeout(()=>D({show:!1,xp:0}),3e3)),n&&(C(!0),setTimeout(()=>C(!1),5e3))}catch(e){console.error("Error awarding XP:",e),m({title:"XP Award Failed",description:"Could not award XP for this action.",variant:"destructive"})}},R=async e=>{await P(e)?m({title:"Revision Complete!",description:"Great job! Keep up the momentum."}):m({title:"Error",description:"Could not complete revision. Please try again.",variant:"destructive"})};if(v)return(0,a.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,a.jsx)(i.Z,{className:"h-8 w-8 animate-spin"})});if(b)return(0,a.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,a.jsxs)(o.Zb,{className:"w-96 bg-destructive/10 border-destructive",children:[(0,a.jsx)(o.Ol,{children:(0,a.jsx)(o.ll,{children:"Oops! Something went wrong."})}),(0,a.jsxs)(o.aY,{children:[(0,a.jsx)("p",{children:b}),(0,a.jsx)(d.z,{onClick:z,className:"mt-4",children:"Try again"})]})]})});if(!u)return(0,a.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,a.jsx)("p",{children:"Topic not found."})});let X=(0,a.jsxs)("div",{className:"container mx-auto p-4 md:p-6 space-y-6",children:[(0,a.jsx)(N,{trigger:E}),(0,a.jsx)(y,{show:S.show,xp:S.xp}),(0,a.jsx)(o.Zb,{children:(0,a.jsx)(o.Ol,{children:(0,a.jsx)("div",{className:"flex justify-between items-start",children:(0,a.jsxs)("div",{children:[(0,a.jsx)(o.ll,{className:"text-2xl font-bold",children:u.name}),(0,a.jsx)(o.SZ,{className:"mt-2",children:u.description})]})})})}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(I,{materials:h,studentId:s,topicId:t,onXPAward:M,onOpenMaterial:(e,t)=>{k()}}),(0,a.jsxs)(o.Zb,{children:[(0,a.jsx)(o.Ol,{children:(0,a.jsx)(o.ll,{children:"Resources"})}),(0,a.jsx)(o.aY,{children:(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:'Study all available materials above. Click any "Open" button to earn XP!'})})]})]}),(0,a.jsxs)(o.Zb,{children:[(0,a.jsxs)(o.Ol,{children:[(0,a.jsx)(o.ll,{children:"\uD83C\uDFDB️ Training Dojo"}),(0,a.jsxs)(o.SZ,{children:["Revision schedule - ",F.overdue.length+F.today.length+F.upcoming.length," total for this topic"]})]}),(0,a.jsxs)(o.aY,{className:"space-y-4",children:[F.overdue.length>0&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(p.Z,{className:"h-4 w-4 text-red-500"}),(0,a.jsxs)("h4",{className:"font-semibold text-sm",children:["\uD83D\uDD34 Overdue (",F.overdue.length,")"]})]}),F.overdue.map(e=>(0,a.jsx)(o.Zb,{className:"p-3 bg-red-50 border-red-200",children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-sm font-medium",children:[e.material_type.toUpperCase()," - Rev ",e.revision_number]}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Due: ",new Date(e.due_date).toLocaleDateString()]})]}),(0,a.jsxs)(d.z,{size:"sm",onClick:()=>R(e.id),children:[(0,a.jsx)(f.Z,{className:"h-3 w-3 mr-1"}),"Complete"]})]})},e.id))]}),F.today.length>0&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(p.Z,{className:"h-4 w-4 text-yellow-500"}),(0,a.jsxs)("h4",{className:"font-semibold text-sm",children:["\uD83D\uDFE0 Today (",F.today.length,")"]})]}),F.today.map(e=>(0,a.jsx)(o.Zb,{className:"p-3 bg-yellow-50 border-yellow-200",children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-sm font-medium",children:[e.material_type.toUpperCase()," - Rev ",e.revision_number]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Due today"})]}),(0,a.jsxs)(d.z,{size:"sm",onClick:()=>R(e.id),children:[(0,a.jsx)(f.Z,{className:"h-3 w-3 mr-1"}),"Complete"]})]})},e.id))]}),F.upcoming.length>0&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(f.Z,{className:"h-4 w-4 text-green-500"}),(0,a.jsxs)("h4",{className:"font-semibold text-sm",children:["\uD83D\uDFE2 Upcoming (",F.upcoming.length,")"]})]}),F.upcoming.slice(0,3).map(e=>(0,a.jsx)(o.Zb,{className:"p-3 bg-green-50 border-green-200",children:(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-sm font-medium",children:[e.material_type.toUpperCase()," - Rev ",e.revision_number]}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Due: ",new Date(e.due_date).toLocaleDateString()]})]})},e.id))]}),0===F.overdue.length&&0===F.today.length&&0===F.upcoming.length&&(0,a.jsx)("p",{className:"text-muted-foreground text-center text-sm py-4",children:"No revisions scheduled for this topic yet. Open materials to start!"})]})]})]})]});return l?(0,a.jsxs)("div",{className:"flex h-screen bg-background",children:[(0,a.jsx)(Z.StudentSidebar,{}),(0,a.jsx)("div",{className:"flex-1 overflow-auto",children:X})]}):(0,a.jsx)("div",{className:"flex-1 overflow-auto",children:X})},k="force-dynamic";function P(){let e=(0,l.useParams)(),t=null==e?void 0:e.topicId,[s,o]=(0,r.useState)(null),[c,d]=(0,r.useState)(!0),m=(0,n.e)();return((0,r.useEffect)(()=>{(async()=>{try{let{data:{user:e}}=await m.auth.getUser();(null==e?void 0:e.id)&&o(e.id)}catch(e){console.error("Error getting student ID:",e)}finally{d(!1)}})()},[m]),c)?(0,a.jsxs)("div",{className:"flex h-screen bg-background",children:[(0,a.jsx)(Z.StudentSidebar,{}),(0,a.jsx)("div",{className:"flex-1 flex justify-center items-center",children:(0,a.jsx)(i.Z,{className:"w-8 h-8 animate-spin"})})]}):s&&t?(0,a.jsxs)("div",{className:"flex h-screen bg-background",children:[(0,a.jsx)(Z.StudentSidebar,{}),(0,a.jsx)(A,{topicId:t,studentId:s,showSidebar:!1})]}):(0,a.jsxs)("div",{className:"flex h-screen bg-background",children:[(0,a.jsx)(Z.StudentSidebar,{}),(0,a.jsx)("div",{className:"flex-1 flex justify-center items-center text-destructive",children:"Missing required parameters"})]})}},5186:function(e,t,s){"use strict";s.d(t,{I:function(){return l}});var a=s(7437);s(2265);var r=s(4508);function l(e){let{className:t,type:s,...l}=e;return(0,a.jsx)("input",{type:s,"data-slot":"input",className:(0,r.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...l})}},7992:function(e,t,s){"use strict";s.d(t,{pm:function(){return u}});var a=s(2265);let r=0,l=new Map,n=e=>{if(l.has(e))return;let t=setTimeout(()=>{l.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);l.set(e,t)},i=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?n(s):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},o=[],c={toasts:[]};function d(e){c=i(c,e),o.forEach(e=>{e(c)})}function m(e){let{...t}=e,s=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>d({type:"DISMISS_TOAST",toastId:s});return d({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||a()}}}),{id:s,dismiss:a,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function u(){let[e,t]=a.useState(c);return a.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:m,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}}},function(e){e.O(0,[5085,2972,5566,2724,2971,2117,1744],function(){return e(e.s=981)}),_N_E=e.O()}]);