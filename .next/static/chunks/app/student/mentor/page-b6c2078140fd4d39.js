(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2213],{1908:function(e,t,r){Promise.resolve().then(r.bind(r,8119))},8119:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return g},dynamic:function(){return p}});var a=r(7437),n=r(2265),s=r(970),i=r(6070),l=r(2869),c=r(5974),o=r(1817),d=r(2369),u=r(3417);let m=(0,r(9205).Z)("PhoneCall",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}],["path",{d:"M14.05 2a9 9 0 0 1 8 7.94",key:"vmijpz"}],["path",{d:"M14.05 6A5 5 0 0 1 18 10",key:"13nbpp"}]]);function f(e){var t,r;let{studentId:f}=e,x=(0,s.e)(),[v,h]=(0,n.useState)(null),[p,g]=(0,n.useState)(!0),[j,b]=(0,n.useState)(!1),[_,y]=(0,n.useState)(null);(0,n.useEffect)(()=>{let e=!0,t=async()=>{g(!0),y(null);try{var t;let{data:r,error:a}=await x.from("student_mentor_assignments").select("mentor_id").eq("student_id",f).eq("is_active",!0).limit(1).maybeSingle();if(a){if(console.warn("mentor assignment error",a),!e)return;h(null);return}if(!(null==r?void 0:r.mentor_id)){if(!e)return;h(null);return}let n=r.mentor_id,[{data:s,error:i},{data:l,error:c}]=await Promise.all([x.from("mentor_profiles").select("mentor_id, specialization, years_of_experience, contact_whatsapp, email").eq("mentor_id",n).maybeSingle(),x.from("profiles").select("full_name, avatar_url").eq("id",n).maybeSingle()]);if(i&&console.warn("mentor_profiles error",i),c&&console.warn("profiles error",c),!e)return;h({mentor_id:n,full_name:null!==(t=null==l?void 0:l.full_name)&&void 0!==t?t:"Mentor",avatar_url:null==l?void 0:l.avatar_url,specialization:null==s?void 0:s.specialization,years_of_experience:null==s?void 0:s.years_of_experience,contact_whatsapp:null==s?void 0:s.contact_whatsapp,email:null==s?void 0:s.email})}catch(t){if(console.error("Error loading mentor",t),!e)return;y("Failed to load mentor"),h(null)}finally{e&&g(!1)}};return f&&t(),()=>{e=!1}},[f,x]);let w=async()=>{if(v){b(!0);try{let{error:e}=await x.from("mentor_requests").insert({student_id:f,mentor_id:v.mentor_id,requested_at:new Date().toISOString(),status:"pending"});if(e)throw e;alert("Callback requested — mentor will contact you.")}catch(e){console.error("Error requesting callback",e),alert("Failed to request callback.")}finally{b(!1)}}};return p?(0,a.jsx)(i.Zb,{children:(0,a.jsx)(i.aY,{className:"flex items-center justify-center",children:(0,a.jsx)(o.Z,{className:"w-6 h-6 animate-spin"})})}):(0,a.jsxs)(i.Zb,{children:[(0,a.jsx)(i.Ol,{children:(0,a.jsx)(i.ll,{children:"Assigned Mentor"})}),(0,a.jsxs)(i.aY,{children:[v?(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[v.avatar_url?(0,a.jsx)("img",{src:v.avatar_url,alt:v.full_name,className:"w-12 h-12 rounded-full object-cover"}):(0,a.jsx)("div",{className:"w-12 h-12 rounded-full bg-muted flex items-center justify-center",children:(0,a.jsx)(d.Z,{className:"w-6 h-6"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-semibold",children:v.full_name}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:null!==(t=v.specialization)&&void 0!==t?t:"General Mentor"}),(0,a.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Experience: ",null!==(r=v.years_of_experience)&&void 0!==r?r:"—"," yrs"]})]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(l.z,{variant:"default",size:"sm",onClick:()=>{if(!(null==v?void 0:v.contact_whatsapp))return;let e=v.contact_whatsapp.replace(/\D/g,"");window.open("https://wa.me/".concat(e),"_blank")},disabled:!v.contact_whatsapp,children:[(0,a.jsx)(u.Z,{className:"w-4 h-4 mr-2"})," Message Mentor"]}),(0,a.jsxs)(l.z,{variant:"outline",size:"sm",onClick:w,disabled:j,children:[(0,a.jsx)(m,{className:"w-4 h-4 mr-2"})," Request Callback"]}),v.email&&(0,a.jsx)("a",{href:"mailto:".concat(v.email),className:"inline-block",children:(0,a.jsx)(l.z,{size:"sm",children:"Email"})})]})]}):(0,a.jsxs)("div",{className:"text-sm text-muted-foreground",children:["No mentor assigned yet.",(0,a.jsx)("div",{className:"mt-3",children:(0,a.jsx)(c.C,{variant:"outline",children:"No Mentor"})})]}),_&&(0,a.jsx)("div",{className:"mt-3 text-xs text-destructive",children:_})]})]})}var x=r(4330),v=r(7648),h=r(2660);let p="force-dynamic";function g(){let[e,t]=(0,n.useState)(null),[r,i]=(0,n.useState)(!0),c=(0,s.e)();return((0,n.useEffect)(()=>{(async()=>{try{var e,r;let{data:a}=await c.auth.getUser();t(null!==(r=null==a?void 0:null===(e=a.user)||void 0===e?void 0:e.id)&&void 0!==r?r:null)}catch(e){console.error("Error getting user",e)}finally{i(!1)}})()},[c]),r)?(0,a.jsxs)("div",{className:"flex h-screen bg-background",children:[(0,a.jsx)(x.StudentSidebar,{}),(0,a.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,a.jsx)(o.Z,{className:"w-8 h-8 animate-spin"})})]}):e?(0,a.jsxs)("div",{className:"flex h-screen bg-background",children:[(0,a.jsx)(x.StudentSidebar,{}),(0,a.jsx)("div",{className:"flex-1 overflow-auto",children:(0,a.jsxs)("div",{className:"container mx-auto p-6",children:[(0,a.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"Your Mentor"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Contact and manage your assigned mentor"})]}),(0,a.jsx)(v.default,{href:"/student",children:(0,a.jsxs)(l.z,{variant:"outline",children:[(0,a.jsx)(h.Z,{className:"w-4 h-4 mr-2"})," Back"]})})]}),(0,a.jsx)(f,{studentId:e})]})})]}):(0,a.jsxs)("div",{className:"flex h-screen bg-background",children:[(0,a.jsx)(x.StudentSidebar,{}),(0,a.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,a.jsx)("div",{className:"text-center text-destructive",children:"Failed to load student"})})]})}},5974:function(e,t,r){"use strict";r.d(t,{C:function(){return c}});var a=r(7437);r(2265);var n=r(7495),s=r(535),i=r(4508);let l=(0,s.j)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function c(e){let{className:t,variant:r,asChild:s=!1,...c}=e,o=s?n.g7:"span";return(0,a.jsx)(o,{"data-slot":"badge",className:(0,i.cn)(l({variant:r}),t),...c})}},1817:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},3417:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])}},function(e){e.O(0,[5085,2972,3745,2971,2117,1744],function(){return e(e.s=1908)}),_N_E=e.O()}]);