(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5705],{3526:function(e,t,s){Promise.resolve().then(s.bind(s,715)),Promise.resolve().then(s.bind(s,4330))},715:function(e,t,s){"use strict";s.d(t,{CharacterSheet:function(){return h}});var r=s(7437),a=s(2265),c=s(970),l=s(6070),i=s(2869),n=s(7648),o=s(2660),d=s(1239),x=s(8896),m=s(1723);function h(e){let{studentId:t}=e,[s,h]=(0,a.useState)(null),[u,p]=(0,a.useState)([]),[f,v]=(0,a.useState)(!0),[j,N]=(0,a.useState)(null);if((0,a.useEffect)(()=>{(async()=>{let e=(0,c.e)();try{let{data:s,error:r}=await e.from("student_profiles").select("current_level, total_points, overall_accuracy, current_streak").eq("profile_id",t).single();if(r)throw r;let{data:a,error:c}=await e.from("student_activity_feed").select("id, activity_type, activity_description, xp_earned, created_at").eq("student_id",t).order("created_at",{ascending:!1}).limit(10);if(c)throw c;let{data:l,error:i}=await e.from("topic_progress").select("video_completed, test_completed, revision_1_completed, revision_2_completed, revision_3_completed, revision_4_completed").eq("student_id",t);if(i)throw i;let n=0,o=0,d=0;if(null==l||l.forEach(e=>{e.video_completed&&n++,e.test_completed&&o++,e.revision_1_completed&&d++,e.revision_2_completed&&d++,e.revision_3_completed&&d++,e.revision_4_completed&&d++}),s){let e=s.current_level||1,t=s.total_points||0;h({level:e,totalXP:t,accuracyPercentage:Math.round(s.overall_accuracy||0),totalVideosWatched:n,totalTestsTaken:o,totalRevisionsCompleted:d,currentStreak:s.current_streak||0,nextLevelXP:(e+1)*1e3})}p((null==a?void 0:a.map(e=>({id:e.id,activityType:e.activity_type,activityDescription:e.activity_description,xpEarned:e.xp_earned||0,createdAt:e.created_at})))||[])}catch(e){console.error("[v0] Error fetching character data:",e),N("Failed to load character data")}finally{v(!1)}})()},[t]),f)return(0,r.jsx)("div",{className:"p-8 text-center",children:"Loading character sheet..."});if(j)return(0,r.jsx)("div",{className:"p-8 text-center text-destructive",children:j});if(!s)return(0,r.jsx)("div",{className:"p-8 text-center text-muted-foreground",children:"No character data found"});let y=s.totalVideosWatched/50*100,g=s.accuracyPercentage,_=s.totalRevisionsCompleted/200*100,b=e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"});return(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-background to-secondary/5",children:[(0,r.jsx)("div",{className:"border-b border-border bg-gradient-to-r from-primary/10 to-accent/10",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-6 py-8",children:(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold",children:"\uD83D\uDEE1ï¸ Your Character Sheet"}),(0,r.jsxs)("p",{className:"text-muted-foreground",children:["Level ",s.level," | Total XP: ",s.totalXP," | Streak: ",s.currentStreak," days"]})]}),(0,r.jsx)(n.default,{href:"/student/dashboard",children:(0,r.jsxs)(i.z,{variant:"outline",size:"sm",children:[(0,r.jsx)(o.Z,{className:"w-4 h-4 mr-2"}),"Back to Home"]})})]})})}),(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[(0,r.jsxs)("div",{className:"grid md:grid-cols-3 gap-6 mb-8",children:[(0,r.jsxs)(l.Zb,{className:"border-2 border-primary/20 hover:shadow-lg transition-shadow",children:[(0,r.jsxs)(l.Ol,{className:"pb-4",children:[(0,r.jsxs)(l.ll,{className:"text-lg flex items-center gap-2",children:[(0,r.jsx)(d.Z,{className:"w-5 h-5 text-primary"}),"Knowledge"]}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Videos Complete"})]}),(0,r.jsx)(l.aY,{children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("div",{className:"flex justify-center items-center mb-4",children:(0,r.jsxs)("div",{className:"relative w-32 h-32",children:[(0,r.jsxs)("svg",{className:"w-32 h-32 transform -rotate-90",viewBox:"0 0 120 120",children:[(0,r.jsx)("circle",{cx:"60",cy:"60",r:"54",fill:"none",stroke:"currentColor",strokeWidth:"8",className:"text-muted"}),(0,r.jsx)("circle",{cx:"60",cy:"60",r:"54",fill:"none",stroke:"currentColor",strokeWidth:"8",strokeDasharray:"".concat(Math.min(y,100)/100*339.3," 339.3"),className:"text-primary transition-all"})]}),(0,r.jsxs)("div",{className:"absolute inset-0 flex items-center justify-center flex-col",children:[(0,r.jsxs)("span",{className:"text-2xl font-bold text-primary",children:[Math.min(Math.round(y),100),"%"]}),(0,r.jsxs)("span",{className:"text-xs text-muted-foreground",children:[s.totalVideosWatched,"/50"]})]})]})}),(0,r.jsxs)("p",{className:"text-sm text-center text-muted-foreground",children:[Math.max(0,50-s.totalVideosWatched)," videos remaining"]})]})})]}),(0,r.jsxs)(l.Zb,{className:"border-2 border-accent/20 hover:shadow-lg transition-shadow",children:[(0,r.jsxs)(l.Ol,{className:"pb-4",children:[(0,r.jsxs)(l.ll,{className:"text-lg flex items-center gap-2",children:[(0,r.jsx)(x.Z,{className:"w-5 h-5 text-accent"}),"Battle Skill"]}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Test Accuracy"})]}),(0,r.jsx)(l.aY,{children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("div",{className:"flex justify-center items-center mb-4",children:(0,r.jsxs)("div",{className:"relative w-32 h-32",children:[(0,r.jsxs)("svg",{className:"w-32 h-32 transform -rotate-90",viewBox:"0 0 120 120",children:[(0,r.jsx)("circle",{cx:"60",cy:"60",r:"54",fill:"none",stroke:"currentColor",strokeWidth:"8",className:"text-muted"}),(0,r.jsx)("circle",{cx:"60",cy:"60",r:"54",fill:"none",stroke:"currentColor",strokeWidth:"8",strokeDasharray:"".concat(g/100*339.3," 339.3"),className:"text-accent transition-all"})]}),(0,r.jsxs)("div",{className:"absolute inset-0 flex items-center justify-center flex-col",children:[(0,r.jsxs)("span",{className:"text-2xl font-bold text-accent",children:[s.accuracyPercentage,"%"]}),(0,r.jsx)("span",{className:"text-xs text-muted-foreground",children:"Accuracy"})]})]})}),(0,r.jsxs)("p",{className:"text-sm text-center text-muted-foreground",children:["Tests: ",s.totalTestsTaken]})]})})]}),(0,r.jsxs)(l.Zb,{className:"border-2 border-warning/20 hover:shadow-lg transition-shadow",children:[(0,r.jsxs)(l.Ol,{className:"pb-4",children:[(0,r.jsxs)(l.ll,{className:"text-lg flex items-center gap-2",children:[(0,r.jsx)(m.Z,{className:"w-5 h-5 text-warning"}),"Discipline"]}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Revisions Complete"})]}),(0,r.jsx)(l.aY,{children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("div",{className:"flex justify-center items-center mb-4",children:(0,r.jsxs)("div",{className:"relative w-32 h-32",children:[(0,r.jsxs)("svg",{className:"w-32 h-32 transform -rotate-90",viewBox:"0 0 120 120",children:[(0,r.jsx)("circle",{cx:"60",cy:"60",r:"54",fill:"none",stroke:"currentColor",strokeWidth:"8",className:"text-muted"}),(0,r.jsx)("circle",{cx:"60",cy:"60",r:"54",fill:"none",stroke:"currentColor",strokeWidth:"8",strokeDasharray:"".concat(Math.min(_,100)/100*339.3," 339.3"),className:"text-warning transition-all"})]}),(0,r.jsxs)("div",{className:"absolute inset-0 flex items-center justify-center flex-col",children:[(0,r.jsxs)("span",{className:"text-2xl font-bold text-warning",children:[Math.min(Math.round(_),100),"%"]}),(0,r.jsxs)("span",{className:"text-xs text-muted-foreground",children:[s.totalRevisionsCompleted,"/200"]})]})]})}),(0,r.jsxs)("p",{className:"text-sm text-center text-muted-foreground",children:[Math.max(0,200-s.totalRevisionsCompleted)," revisions remaining"]})]})})]})]}),(0,r.jsxs)(l.Zb,{children:[(0,r.jsx)(l.Ol,{children:(0,r.jsx)(l.ll,{children:"Recent Activity"})}),(0,r.jsx)(l.aY,{children:(0,r.jsx)("div",{className:"space-y-4",children:0===u.length?(0,r.jsx)("p",{className:"text-center py-8 text-muted-foreground",children:"No recent activity"}):u.map(e=>(0,r.jsxs)("div",{className:"flex items-start gap-4 pb-4 border-b border-border last:border-b-0 last:pb-0",children:[(0,r.jsx)("div",{className:"text-sm font-medium text-muted-foreground min-w-12",children:b(e.createdAt)}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"text-sm",children:e.activityDescription}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:e.activityType})]}),(0,r.jsxs)("div",{className:"font-bold text-primary",children:["+",e.xpEarned," XP"]})]},e.id))})})]})]})]})}},1723:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9205).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},8896:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9205).Z)("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]])}},function(e){e.O(0,[5085,2972,3745,2971,2117,1744],function(){return e(e.s=3526)}),_N_E=e.O()}]);