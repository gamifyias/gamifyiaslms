(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9181],{1203:function(e,t,r){Promise.resolve().then(r.bind(r,9847))},9847:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return x},dynamic:function(){return v}});var n=r(7437),a=r(970),s=r(2869),i=r(6070),o=r(9376),d=r(2265);let l=0,u=new Map,c=e=>{if(u.has(e))return;let t=setTimeout(()=>{u.delete(e),h({type:"REMOVE_TOAST",toastId:e})},1e6);u.set(e,t)},f=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?c(r):e.toasts.forEach(e=>{c(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},m=[],p={toasts:[]};function h(e){p=f(p,e),m.forEach(e=>{e(p)})}function g(e){let{...t}=e,r=(l=(l+1)%Number.MAX_SAFE_INTEGER).toString(),n=()=>h({type:"DISMISS_TOAST",toastId:r});return h({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||n()}}}),{id:r,dismiss:n,update:e=>h({type:"UPDATE_TOAST",toast:{...e,id:r}})}}let v="force-dynamic";function x(){let[e,t]=(0,d.useState)("student"),[r,l]=(0,d.useState)(!1),[u,c]=(0,d.useState)(null),[f,v]=(0,d.useState)(!0),x=(0,o.useRouter)(),{toast:b}=function(){let[e,t]=d.useState(p);return d.useEffect(()=>(m.push(t),()=>{let e=m.indexOf(t);e>-1&&m.splice(e,1)}),[e]),{...e,toast:g,dismiss:e=>h({type:"DISMISS_TOAST",toastId:e})}}();(0,d.useEffect)(()=>{(async()=>{let e=(0,a.e)(),{data:{user:r}}=await e.auth.getUser();if(r){c(r);let{data:n}=await e.from("profiles").select("role").eq("id",r.id).single();if(null==n?void 0:n.role){t(n.role);let e="admin"===n.role?"/admin":"mentor"===n.role?"/mentor":"/student";x.push(e);return}}else x.push("/auth/login");v(!1)})()},[x]);let y=async()=>{l(!0);let t=(0,a.e)();try{var r,n;let{error:a}=await t.auth.updateUser({data:{role:e,full_name:null==u?void 0:null===(r=u.user_metadata)||void 0===r?void 0:r.full_name}});if(a)throw a;let{error:s}=await t.from("profiles").upsert({id:null==u?void 0:u.id,full_name:(null==u?void 0:null===(n=u.user_metadata)||void 0===n?void 0:n.full_name)||(null==u?void 0:u.email),email:null==u?void 0:u.email,role:e},{onConflict:"id"});if(s)throw s;if("mentor"===e){let{error:e}=await t.from("mentor_profiles").upsert({id:null==u?void 0:u.id,profile_id:null==u?void 0:u.id,specialization:"UPSC"},{onConflict:"id"});if(e)throw e}else if("student"===e){let{error:e}=await t.from("student_profiles").upsert({id:null==u?void 0:u.id,profile_id:null==u?void 0:u.id},{onConflict:"id"});if(e)throw e}b({title:"Welcome to UPSC Elite!",description:"You've been set up as a ".concat(e,". Redirecting to your dashboard...")});let i="admin"===e?"/admin":"mentor"===e?"/mentor":"/student";setTimeout(()=>{x.push(i)},500)}catch(e){console.error("[v0] Error in role selection:",e),b({title:"Error",description:e instanceof Error?e.message:"An error occurred",variant:"destructive"}),l(!1)}};return f?(0,n.jsx)("div",{className:"flex min-h-screen w-full items-center justify-center",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),(0,n.jsx)("p",{className:"mt-4 text-muted-foreground",children:"Loading..."})]})}):(0,n.jsx)("div",{className:"flex min-h-screen w-full items-center justify-center p-6 md:p-10 bg-gradient-to-br from-background to-secondary",children:(0,n.jsx)("div",{className:"w-full max-w-2xl",children:(0,n.jsxs)("div",{className:"flex flex-col gap-8",children:[(0,n.jsxs)("div",{className:"space-y-2 text-center",children:[(0,n.jsx)("h1",{className:"text-4xl font-bold bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent",children:"Welcome to Gamify IAS Academy"}),(0,n.jsx)("p",{className:"text-lg text-muted-foreground",children:"Choose your role to get started"})]}),(0,n.jsx)("div",{className:"grid md:grid-cols-3 gap-4",children:[{id:"student",title:"Student",description:"Prepare for UPSC with gamified learning",icon:"\uD83D\uDCDA",features:["Practice tests","Track progress","Earn badges","Leaderboards"]},{id:"mentor",title:"Mentor",description:"Guide students in their preparation",icon:"\uD83D\uDC68‍\uD83C\uDFEB",features:["Manage students","Create content","Track performance","Ratings"]},{id:"admin",title:"Administrator",description:"Manage platform and users",icon:"⚙️",features:["User management","Content moderation","Analytics","System settings"]}].map(r=>(0,n.jsxs)(i.Zb,{className:"cursor-pointer transition-all border-2 ".concat(e===r.id?"border-primary bg-primary/5 shadow-lg":"border-border hover:border-primary/50"),onClick:()=>t(r.id),children:[(0,n.jsxs)(i.Ol,{children:[(0,n.jsx)("div",{className:"text-4xl mb-2",children:r.icon}),(0,n.jsx)(i.ll,{children:r.title}),(0,n.jsx)(i.SZ,{children:r.description})]}),(0,n.jsx)(i.aY,{children:(0,n.jsx)("ul",{className:"space-y-1 text-sm",children:r.features.map(e=>(0,n.jsxs)("li",{className:"flex items-center gap-2",children:[(0,n.jsx)("span",{className:"text-primary",children:"✓"}),(0,n.jsx)("span",{className:"text-muted-foreground",children:e})]},e))})})]},r.id))}),(0,n.jsx)(s.z,{onClick:y,disabled:r,size:"lg",className:"w-full",children:r?"Setting up...":"Continue as ".concat(e.charAt(0).toUpperCase()+e.slice(1))})]})})})}},2869:function(e,t,r){"use strict";r.d(t,{d:function(){return o},z:function(){return d}});var n=r(7437);r(2265);var a=r(7495),s=r(535),i=r(4508);let o=(0,s.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function d(e){let{className:t,variant:r,size:s,asChild:d=!1,...l}=e,u=d?a.g7:"button";return(0,n.jsx)(u,{"data-slot":"button",className:(0,i.cn)(o({variant:r,size:s,className:t})),...l})}},6070:function(e,t,r){"use strict";r.d(t,{Ol:function(){return i},SZ:function(){return d},Zb:function(){return s},aY:function(){return l},ll:function(){return o}});var n=r(7437);r(2265);var a=r(4508);function s(e){let{className:t,...r}=e;return(0,n.jsx)("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...r})}function i(e){let{className:t,...r}=e;return(0,n.jsx)("div",{"data-slot":"card-header",className:(0,a.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...r})}function o(e){let{className:t,...r}=e;return(0,n.jsx)("div",{"data-slot":"card-title",className:(0,a.cn)("leading-none font-semibold",t),...r})}function d(e){let{className:t,...r}=e;return(0,n.jsx)("div",{"data-slot":"card-description",className:(0,a.cn)("text-muted-foreground text-sm",t),...r})}function l(e){let{className:t,...r}=e;return(0,n.jsx)("div",{"data-slot":"card-content",className:(0,a.cn)("px-6",t),...r})}},970:function(e,t,r){"use strict";r.d(t,{e:function(){return a}});var n=r(1695);function a(){return(0,n.createBrowserClient)("https://cwzdqduyotcbwujmrohz.supabase.co","sb_publishable_l2dqR-V5py1BmaOiivWAeA_pWtgIadq")}},4508:function(e,t,r){"use strict";r.d(t,{cn:function(){return s}});var n=r(1994),a=r(3335);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.m6)((0,n.W)(t))}},9376:function(e,t,r){"use strict";var n=r(5475);r.o(n,"useParams")&&r.d(t,{useParams:function(){return n.useParams}}),r.o(n,"usePathname")&&r.d(t,{usePathname:function(){return n.usePathname}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}}),r.o(n,"useSearchParams")&&r.d(t,{useSearchParams:function(){return n.useSearchParams}})}},function(e){e.O(0,[5085,2971,2117,1744],function(){return e(e.s=1203)}),_N_E=e.O()}]);